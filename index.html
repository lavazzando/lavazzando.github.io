<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Matteo Traverso – Sound Artist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    :root{
      --bg:#fff;--fg:#111;--muted:#555;--accent:#ff4f9a;--border:#ccc;
      --purple:#6f2cff; /* hover border */
      --font-sans:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
      --font-mono:"SF Mono",ui-monospace,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;
    }

    *{ box-sizing:border-box; }

    body{
      margin:0;
      min-height:100vh;
      background:var(--bg);
      color:var(--fg);
      font-family:var(--font-sans);
      overflow-x:hidden;
      cursor:none; /* hide OS cursor */
    }

    /* No native cursor anywhere */
    *, *::before, *::after{ cursor:none !important; }

    /* ===== Layers ===== */

    /* Background canvas (stretched) */
    #bg-lines{
      position:fixed;
      inset:0;
      width:100vw;
      height:100vh;
      z-index:0;
      pointer-events:none;
    }

    /* Creatures above background, behind content */
    #creature-layer{
      position:fixed;
      inset:0;
      z-index:1;
      pointer-events:none;
    }

    /* Content above everything (except pointer) */
    .frame{
      max-width:1100px;
      margin:2.5rem auto 3rem;
      padding:0 1.5rem;
      border:1px dashed var(--border);
      background:rgba(255,255,255,0.92);
      backdrop-filter:blur(6px);
      position:relative;
      z-index:2;
    }

    /* Pointer on top */
    #grad-square{
      position:fixed;
      width:50px;height:50px;
      top:50%;left:50%;
      transform:translate(-50%,-50%);
      image-rendering:pixelated;
      pointer-events:none;
      z-index:9999;
    }

    /* Creature canvases */
    .creature{
      position:absolute;
      width:60px;
      height:60px;
      image-rendering:pixelated;
      opacity:0;
      transition:none;
      filter:none;
    }

    header{
      padding:1.5rem 1.5rem 1rem;
      border-bottom:1px solid var(--border);
      display:flex;
      flex-wrap:wrap;
      gap:1rem 2rem;
      align-items:baseline;
      justify-content:space-between;
    }

    .site-title{
      font-family: Cambria, serif;
      font-size:20px;
      font-weight:700;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .site-title span{ color:var(--fg); }

    .tagline{
      font-size:.9rem;
      color:var(--muted);
      max-width:25rem;
    }

    nav{
      display:flex;
      gap:1.2rem;
      font-size:.85rem;
      text-transform:uppercase;
      letter-spacing:.12em;
    }

    nav a{
      color:var(--muted);
      text-decoration:none;
      position:relative;
    }

    nav a::after{
      content:"";
      position:absolute;
      left:0;
      bottom:-.12rem;
      width:0;
      height:2px;
      background:var(--accent);
      transition:width 150ms ease;
    }

    nav a:hover{ color:var(--fg); }
    nav a:hover::after{ width:100%; }

    main{ padding:1.5rem; }

    .layout{
      display:grid;
      grid-template-columns:minmax(0,1.1fr) minmax(0,1.4fr);
      gap:2rem;
    }
    @media(max-width:800px){ .layout{ grid-template-columns:1fr; } }

    .intro h1{
      font-size:clamp(1.2rem,2vw,1.8rem);
      margin:0 0 .75rem;
    }

    .intro p{
      margin:0 0 .75rem;
      color:var(--muted);
      font-size:.98rem;
    }

    /* ===== Icon grid (replaces project windows) ===== */
    .icon-grid{
      height:100%;
      min-height:220px;
      display:flex;
      align-items:left;          /* vertical center inside its column */
      justify-content:left;      /* horizontal center */
    }

    .icon-row{
      width:100%;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:1rem;
      flex-wrap:wrap;
    }

    .icon-card{
      width:190px;
      min-height:180px;
      border-radius:14px;
      border:1px solid var(--border);
      background:#ffffff;
      padding:1rem;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      text-decoration:none;
      color:inherit;
      transition:border-color 140ms ease, box-shadow 140ms ease;
    }

    .icon-card:hover{
      border-color:var(--purple);
      box-shadow:0 0 0 1px rgba(111,44,255,.35);
    }

    .icon-card img{
      width:64px;
      height:64px;
      object-fit:contain;
      image-rendering:auto;
      display:block;
      margin-bottom:.8rem;
      filter:none;
    }

    .icon-caption{
      font-size:.78rem;
      letter-spacing:.12em;
      text-transform:uppercase;
      color:var(--muted);
      text-align:center;
      line-height:1.25;
    }

    footer{
      padding:0 1.5rem 1.5rem;
      border-top:1px solid var(--border);
      font-size:.78rem;
      color:var(--muted);
      display:flex;
      flex-wrap:wrap;
      justify-content:space-between;
      gap:.75rem;
    }

    footer a{ color:var(--muted); text-decoration:none; }
    footer a:hover{ color:var(--fg); text-decoration:underline; }

    /* per-letter spans */
    .random-letter{
      display:inline-block;
      white-space:pre;
    }

    /* keep title readable even when scrambled */
    .site-title .random-letter{
      font-family: Cambria, serif !important;
      font-weight: 700 !important;
      font-size: 20px !important;
      letter-spacing: .06em;
      color: var(--fg);
    }
  </style>
</head>

<body>
  <!-- Stretched background -->
  <canvas id="bg-lines" aria-hidden="true"></canvas>

  <!-- Creatures layer -->
  <div id="creature-layer" aria-hidden="true"></div>

  <!-- Pointer -->
  <canvas id="grad-square" width="50" height="50" aria-hidden="true"></canvas>

  <div class="frame">
    <header>
      <div>
        <div class="site-title"><span>Matteo Traverso</span></div>
        <div class="tagline"> Sound artist || modular synth player || improviser || sound installations and spatial audio entusiast || digital synth developer ||
        </div>
      </div>

      <nav>
        <a href="#works">Works</a>
        <a href="#about">About</a>
        <a href="#contact">Contact</a>
      </nav>
    </header>

    <main>
      <div class="layout">
        <section class="intro" id="about">
          <h1>exploring boundaries of numb senses</h1>
        </section>

        <section id="works" aria-label="Selected works">
          <div class="icon-grid">
            <div class="icon-row">
              <!-- Put these PNG files next to index.html (or adjust paths) -->
              <a class="icon-card" href="#" aria-label="Acousmatic & multichannel">
                <img src="audio/acousmatic.png" alt="" />
                <div class="icon-caption">acousmatic &amp; multichannel</div>
              </a>

              <a class="icon-card" href="#" aria-label="Installations & performances">
                <img src="audio/insta-perf.png" alt="" />
                <div class="icon-caption">installations &amp; performances</div>
              </a>

              <a class="icon-card" href="#" aria-label="Records">
                <img src="audio/records.png" alt="" />
                <div class="icon-caption">records</div>
              </a>
            </div>
          </div>
        </section>
      </div>
    </main>

    <footer id="contact">
      <div>© <span id="year"></span> Matteo Traverso</div>
      <div>
        <a href="mailto:matteo.traverso02@gmail.com">matteo.traverso02@gmail.com</a> ·
        <a href="https://instagram.com/yourprofile" target="_blank" rel="noopener">Instagram</a> ·
        <a href="https://github.com/yourusername" target="_blank" rel="noopener">GitHub</a>
      </div>
    </footer>
  </div>

  <script>
    document.getElementById("year").textContent = new Date().getFullYear();
  </script>

  <script>
    // ===== Pointer creature (cursor) =====
    const canvas = document.getElementById("grad-square");
    const ctx = canvas.getContext("2d");

    const pCols = 10;
    const pRows = 10;
    const pCell = 5;
    const pN = pCols * pRows;

    const baseAlpha = new Float32Array(pN);
    const currentAlpha = new Float32Array(pN);
    const intervals = new Float32Array(pN);
    const timers = new Float32Array(pN);

    const minFps = 0.01;
    const maxFps = 8;

    const pcx = (pCols - 1) / 2;
    const pcy = (pRows - 1) / 2;
    const pMaxDist = Math.sqrt(pcx*pcx + pcy*pcy);

    let frozen = false;

    let idp = 0;
    for (let y=0; y<pRows; y++){
      for (let x=0; x<pCols; x++){
        const dx = x - pcx;
        const dy = y - pcy;
        const dist = Math.sqrt(dx*dx + dy*dy);
        let t = dist / pMaxDist; if (t>1) t=1;
        baseAlpha[idp] = 1 - t;

        const fps = minFps + Math.random() * (maxFps - minFps);
        intervals[idp] = 1 / fps;
        timers[idp] = Math.random() * intervals[idp];

        currentAlpha[idp] = baseAlpha[idp] * Math.random();
        idp++;
      }
    }

    function updatePointer(dt){
      if (frozen) return;
      for (let i=0; i<pN; i++){
        timers[i] += dt;
        if (timers[i] >= intervals[i]){
          timers[i] -= intervals[i];
          currentAlpha[i] = baseAlpha[i] * Math.random();
        }
      }
    }

    function renderPointer(){
      ctx.clearRect(0,0,canvas.width,canvas.height);
      let i=0;
      for (let y=0; y<pRows; y++){
        for (let x=0; x<pCols; x++){
          const a = currentAlpha[i];
          if (a > 0){
            ctx.fillStyle = `rgba(0,0,0,${a})`;
            ctx.fillRect(x*pCell, y*pCell, pCell, pCell);
          }
          i++;
        }
      }
    }

    let lastTime = null;
    function pointerLoop(ts){
      if (lastTime === null) lastTime = ts;
      const dt = (ts - lastTime) / 1000;
      lastTime = ts;

      updatePointer(dt);
      renderPointer();
      requestAnimationFrame(pointerLoop);
    }
    requestAnimationFrame(pointerLoop);

    window.addEventListener("mousemove", (e) => {
      canvas.style.left = e.clientX + "px";
      canvas.style.top  = e.clientY + "px";

      const el = document.elementFromPoint(e.clientX, e.clientY);
      let node = el;
      let onLink = false;
      while (node){
        if (node.tagName === "A"){ onLink = true; break; }
        node = node.parentElement;
      }
      frozen = onLink;
    });
  </script>

  <script>
    // ===== Random font per-letter across the whole site =====
    window.addEventListener("DOMContentLoaded", () => {
      const fonts = [
        "Courier New, monospace",
        "OCR A Std, monospace",
        "Andale Mono, monospace",
        "Bookman, 'URW Bookman L', serif",
        "Optima, sans-serif",
        "Cambria, serif"
      ];
      const weights = [80, 200, 500];
      const randomItem = (arr) => arr[Math.floor(Math.random() * arr.length)];

      const walker = document.createTreeWalker(
        document.body,
        NodeFilter.SHOW_TEXT,
        {
          acceptNode(node){
            if (!node.nodeValue || !node.nodeValue.trim()) return NodeFilter.FILTER_REJECT;
            const p = node.parentElement;
            if (!p) return NodeFilter.FILTER_REJECT;
            const tag = p.tagName;
            if (tag === "SCRIPT" || tag === "STYLE" || tag === "NOSCRIPT") return NodeFilter.FILTER_REJECT;
            if (p.closest && (p.closest("#grad-square") || p.closest("#bg-lines") || p.closest("#creature-layer"))) {
              return NodeFilter.FILTER_REJECT;
            }
            return NodeFilter.FILTER_ACCEPT;
          }
        }
      );

      const nodes = [];
      let n;
      while ((n = walker.nextNode())) nodes.push(n);

      for (const textNode of nodes){
        const text = textNode.nodeValue;
        const frag = document.createDocumentFragment();
        for (const ch of text){
          const s = document.createElement("span");
          s.className = "random-letter";
          s.textContent = ch;
          s.style.fontFamily = randomItem(fonts);
          s.style.fontWeight = String(randomItem(weights));
          frag.appendChild(s);
        }
        textNode.parentNode.replaceChild(frag, textNode);
      }
    });
  </script>

  <script>
    // ===== STRETCHED background (your last version) =====
    const bg = document.getElementById("bg-lines");
    const bctx = bg.getContext("2d", { alpha: true });

    const cellW = 2;    // thin columns
    const cellH = 46;   // stretched "pixels" -> lines
    const blurPx = 10;
    const baseOpacity = 0.055;
    const slowFactorFrames = 10;

    let mx = window.innerWidth * 0.5, my = window.innerHeight * 0.5;
    let tx = mx, ty = my;

    function resizeBG(){
      const dpr = window.devicePixelRatio || 1;
      bg.width  = Math.floor(window.innerWidth * dpr);
      bg.height = Math.floor(window.innerHeight * dpr);
      bg.style.width = window.innerWidth + "px";
      bg.style.height = window.innerHeight + "px";
      bctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    }
    window.addEventListener("resize", resizeBG);
    resizeBG();

    window.addEventListener("mousemove", (e) => { tx = e.clientX; ty = e.clientY; });

    let noiseA = new Float32Array(0);
    let noiseB = new Float32Array(0);
    let tNoise = 0;
    let frameCount = 0;

    function rand01(){ return Math.random(); }
    function lerp(a,b,t){ return a + (b-a)*t; }

    function buildNoise(cols, rows){
      const arr = new Float32Array(cols * rows);
      for (let i=0;i<arr.length;i++) arr[i] = rand01();
      return arr;
    }

    function ensureNoiseSize(){
      const cols = Math.ceil(window.innerWidth / cellW);
      const rows = Math.ceil(window.innerHeight / cellH);
      const needed = cols * rows;
      if (noiseA.length !== needed){
        noiseA = buildNoise(cols, rows);
        noiseB = buildNoise(cols, rows);
        tNoise = 0;
      }
      return { cols, rows };
    }

    function renderBG(){
      const { cols, rows } = ensureNoiseSize();

      mx = lerp(mx, tx, 0.12);
      my = lerp(my, ty, 0.08);

      frameCount++;
      if (frameCount % slowFactorFrames === 0){
        noiseA = noiseB;
        noiseB = buildNoise(cols, rows);
        tNoise = 0;
      }
      tNoise = Math.min(1, tNoise + 0.015);

      bctx.clearRect(0,0,window.innerWidth, window.innerHeight);
      bctx.save();
      bctx.filter = `blur(${blurPx}px)`;

      const g = bctx.createRadialGradient(
        mx, my, 0,
        mx, my, Math.max(window.innerWidth, window.innerHeight) * 0.55
      );
      g.addColorStop(0, `rgba(0,0,0,${baseOpacity})`);
      g.addColorStop(1, `rgba(0,0,0,0)`);
      bctx.fillStyle = g;
      bctx.fillRect(0,0,window.innerWidth, window.innerHeight);

      bctx.globalCompositeOperation = "multiply";

      let i = 0;
      for (let y=0; y<rows; y++){
        const py = y * cellH;
        for (let x=0; x<cols; x++){
          const px = x * cellW;
          const n = lerp(noiseA[i], noiseB[i], tNoise);
          const a = (n * n) * 0.4;
          bctx.fillStyle = `rgba(0,0,0,${a})`;
          bctx.fillRect(px, py, cellW, cellH);
          i++;
        }
      }

      bctx.restore();
      requestAnimationFrame(renderBG);
    }
    requestAnimationFrame(renderBG);
  </script>

  <script>
    // ===== Edge creatures (7–13), black OR transparent per square =====
    window.addEventListener("DOMContentLoaded", () => {
      const layer = document.getElementById("creature-layer");
      if (!layer) return;

      const randInt = (a,b) => Math.floor(a + Math.random()*(b-a+1));
      const rand = (a,b) => a + Math.random()*(b-a);

      const creatureCount = randInt(7, 13);

      const cols = 10, rows = 10, cellSize = 5;
      const baseW = cols * cellSize; // 50
      const baseH = rows * cellSize; // 50
      const N = cols * rows;

      const base = new Float32Array(N);
      const cx = (cols - 1) / 2;
      const cy = (rows - 1) / 2;
      const maxDist = Math.sqrt(cx*cx + cy*cy);

      let k = 0;
      for (let y=0; y<rows; y++){
        for (let x=0; x<cols; x++){
          const dx = x - cx, dy = y - cy;
          const dist = Math.sqrt(dx*dx + dy*dy);
          let t = dist / maxDist; if (t>1) t=1;
          base[k++] = 1 - t;
        }
      }

      function edgePosition(margin=18){
        const w = window.innerWidth;
        const h = window.innerHeight;
        const edge = randInt(0,3);
        let x, y;

        if (edge === 0){
          x = rand(margin, w - margin);
          y = rand(margin, margin + 90);
        } else if (edge === 1){
          x = rand(margin, w - margin);
          y = rand(h - margin - 90, h - margin);
        } else if (edge === 2){
          x = rand(margin, margin + 90);
          y = rand(margin, h - margin);
        } else {
          x = rand(w - margin - 90, w - margin);
          y = rand(margin, h - margin);
        }
        return {x,y};
      }

      function makeCreature(){
        const c = document.createElement("canvas");
        c.className = "creature";
        c.width = baseW;
        c.height = baseH;

        const size = rand(35, 65);
        c.style.width = `${size}px`;
        c.style.height = `${size}px`;

        const p = edgePosition();
        c.style.left = `${p.x}px`;
        c.style.top  = `${p.y}px`;

        layer.appendChild(c);

        const ctx = c.getContext("2d");
        ctx.imageSmoothingEnabled = false;

        const alpha = new Float32Array(N);
        const timers = new Float32Array(N);
        const intervals = new Float32Array(N);

        const minInterval = 1.6;
        const maxInterval = 6.0;

        for (let i=0; i<N; i++){
          intervals[i] = rand(minInterval, maxInterval);
          timers[i] = rand(0, intervals[i]);
          alpha[i] = base[i] * Math.random();
        }

        function draw(){
          ctx.clearRect(0,0,baseW,baseH);
          let i = 0;
          for (let y=0; y<rows; y++){
            for (let x=0; x<cols; x++){
              const a = alpha[i];
              if (a > 0.01){
                ctx.fillStyle = `rgba(0,0,0,${a})`;
                ctx.fillRect(x*cellSize, y*cellSize, cellSize, cellSize);
              }
              i++;
            }
          }
        }

        let last = null;
        function tick(ts){
          if (last === null) last = ts;
          const dt = (ts - last) / 1000;
          last = ts;

          if (!frozen){
            for (let i=0; i<N; i++){
              timers[i] += dt;
              if (timers[i] >= intervals[i]){
                timers[i] -= intervals[i];
                intervals[i] = rand(minInterval, maxInterval);
                alpha[i] = base[i] * Math.random();
              }
            }
            draw();
          }
          requestAnimationFrame(tick);
        }

        draw();
        requestAnimationFrame(tick);

        async function lifecycle(){
          while (true){
            c.style.opacity = "0";
            frozen = false;

            await new Promise(r => setTimeout(r, randInt(2200, 9000)));

            const p = edgePosition();
            c.style.left = `${p.x}px`;
            c.style.top  = `${p.y}px`;

            const size = rand(35, 65);
            c.style.width = `${size}px`;
            c.style.height = `${size}px`;

            c.style.opacity = String(rand(0.35, 0.75));
            frozen = false;

            await new Promise(r => setTimeout(r, randInt(1800, 6500)));

            frozen = true;
            c.style.opacity = "0";
            frozen = false;
          }
        }
        lifecycle();

        return c;
      }

      const creatures = [];
      for (let i=0; i<creatureCount; i++){
        creatures.push(makeCreature());
      }

      window.addEventListener("resize", () => {
        for (const c of creatures){
          const p = edgePosition();
          c.style.left = `${p.x}px`;
          c.style.top  = `${p.y}px`;
        }
      });
    });
  </script>
</body>
</html>
