<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Matteo Traverso – Sound Artist</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#fff;--fg:#111;--muted:#555;--accent:#ff4f9a;--border:#ccc;
      --purple:#6f2cff; 
      --font-sans:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; min-height:100vh; background:var(--bg); color:var(--fg);
      font-family:var(--font-sans); overflow-x:hidden; cursor:none; 
    }
    *, *::before, *::after{ cursor:none !important; }

    /* Layers */
    #bg-lines { position:fixed; inset:0; z-index:0; pointer-events:none; }
    #creature-layer { position:fixed; inset:0; z-index:1; pointer-events:none; }
    #grad-square { position:fixed; width:50px; height:50px; pointer-events:none; z-index:9999; image-rendering:pixelated; transform:translate(-50%,-50%); }
    
    .creature { position:absolute; width:60px; height:60px; image-rendering:pixelated; opacity:0; z-index:1; }

    .frame{
      max-width:1100px; margin:2.5rem auto 3rem; padding:0 1.5rem;
      border:1px dashed var(--border); background:rgba(255,255,255,0.92);
      backdrop-filter:blur(6px); position:relative; z-index:2;
    }

    header{ padding:1.5rem; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:baseline; flex-wrap:wrap; gap:1rem; }
    .site-title{ font-family: Cambria, serif; font-size:20px; font-weight:700; text-transform:uppercase; }
    .tagline{ font-size:.9rem; color:var(--muted); max-width:25rem; }
    nav{ display:flex; gap:1.2rem; font-size:.85rem; text-transform:uppercase; }
    nav a{ color:var(--muted); text-decoration:none; position:relative; }
    nav a:hover{ color:var(--fg); }

    main{ padding:1.5rem; }
    .layout{ display:grid; grid-template-columns:1.1fr 1.4fr; gap:2rem; }
    @media(max-width:800px){ .layout{ grid-template-columns:1fr; } }

    /* Box e Didascalie */
    .icon-grid { display: flex; align-items: flex-end; min-height: 250px; }
    .icon-row { display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; width: 100%; }
    .icon-card {
      position: relative; width: 170px; height: 110px; background: #fff;
      border: 1px solid var(--border); display: flex; align-items: center; justify-content: center;
      text-decoration: none; margin-bottom: 50px; transition: border-color 0.2s;
    }
    .icon-card:hover { border-color: var(--purple); }
    .icon-card img { width: 45px; height: 45px; object-fit: contain; }
    .icon-caption {
      position: absolute; top: 100%; left: 0; right: 0; padding-top: 10px;
      font-size: .65rem; letter-spacing: .1em; text-transform: uppercase;
      color: var(--muted); text-align: center; pointer-events: none;
    }

    footer{ padding:1.5rem; border-top:1px solid var(--border); font-size:.78rem; color:var(--muted); display:flex; justify-content:space-between; }
    .random-letter{ display:inline-block; white-space:pre; }
  </style>
</head>
<body>

  <canvas id="bg-lines"></canvas>
  <div id="creature-layer"></div>
  <canvas id="grad-square" width="50" height="50"></canvas>

  <div class="frame">
    <header>
      <div>
        <div class="site-title">Matteo Traverso</div>
        <div class="tagline">Sound artist || modular synth || digital developer</div>
      </div>
      <nav><a href="#works">Works</a><a href="#about">About</a><a href="#contact">Contact</a></nav>
    </header>
    <main>
      <div class="layout">
        <section class="intro"><h1>exploring boundaries of numb senses</h1></section>
        <section id="works">
          <div class="icon-grid">
            <div class="icon-row">
              <a class="icon-card" href="#">
                <img src="audio/acousmatic-1024.png" alt="" />
                <div class="icon-caption">acousmatic & multichannel</div>
              </a>
              <a class="icon-card" href="#">
                <img src="audio/insta-perf-1024.png" alt="" />
                <div class="icon-caption">installations & performances</div>
              </a>
            </div>
          </div>
        </section>
      </div>
    </main>
    <footer>
      <div>© <span id="year"></span> Matteo Traverso</div>
      <a href="mailto:matteo.traverso02@gmail.com">matteo.traverso02@gmail.com</a>
    </footer>
  </div>

  <script>
    let frozen = false;
    let lastTime = 0;
    document.getElementById("year").textContent = new Date().getFullYear();

    // 1. POINTER SCRIPT
    const pCanvas = document.getElementById("grad-square");
    const pCtx = pCanvas.getContext("2d");
    const pCols = 10, pRows = 10, pCell = 5;
    const pAlphas = new Float32Array(100).fill(0);
    
    window.addEventListener("mousemove", (e) => {
      pCanvas.style.left = e.clientX + "px";
      pCanvas.style.top = e.clientY + "px";
      const target = document.elementFromPoint(e.clientX, e.clientY);
      frozen = !!(target && target.closest("a"));
    });

    function drawPointer(ts) {
      const dt = ts - lastTime;
      lastTime = ts;
      if (!frozen && dt < 100) {
        pCtx.clearRect(0, 0, 50, 50);
        for (let i = 0; i < 100; i++) {
          if (Math.random() > 0.9) pAlphas[i] = Math.random() * 0.6;
          pCtx.fillStyle = `rgba(0,0,0,${pAlphas[i]})`;
          pCtx.fillRect((i % 10) * 5, Math.floor(i / 10) * 5, 5, 5);
        }
      }
      requestAnimationFrame(drawPointer);
    }
    requestAnimationFrame(drawPointer);

    // 2. BACKGROUND LINES
    const bg = document.getElementById("bg-lines");
    const bctx = bg.getContext("2d");
    function resize() { bg.width = window.innerWidth; bg.height = window.innerHeight; }
    window.addEventListener("resize", resize); resize();

    function drawBG() {
      bctx.clearRect(0, 0, bg.width, bg.height);
      for (let x = 0; x < bg.width; x += 4) {
        bctx.fillStyle = `rgba(0,0,0,${Math.random() * 0.05})`;
        bctx.fillRect(x, 0, 1, bg.height);
      }
      setTimeout(() => requestAnimationFrame(drawBG), 100);
    }
    drawBG();

    // 3. CREATURES SCRIPT
    const creatureLayer = document.getElementById("creature-layer");
    function spawnCreature() {
      const c = document.createElement("canvas");
      c.className = "creature";
      c.width = 50; c.height = 50;
      c.style.left = Math.random() * window.innerWidth + "px";
      c.style.top = Math.random() * window.innerHeight + "px";
      creatureLayer.appendChild(c);
      
      const ctx = c.getContext("2d");
      let op = 0;
      let fadeIn = setInterval(() => {
        op += 0.01; c.style.opacity = op;
        ctx.clearRect(0,0,50,50);
        for(let i=0; i<30; i++) {
          ctx.fillStyle = `rgba(0,0,0,${Math.random()})`;
          ctx.fillRect(Math.random()*50, Math.random()*50, 5, 5);
        }
        if(op >= 0.5) { 
          clearInterval(fadeIn);
          setTimeout(() => {
            let fadeOut = setInterval(() => {
              op -= 0.01; c.style.opacity = op;
              if(op <= 0) { clearInterval(fadeOut); c.remove(); }
            }, 50);
          }, 2000);
        }
      }, 50);
    }
    setInterval(spawnCreature, 3000);

    // 4. RANDOM LETTERS
    const fonts = ["Courier New", "serif", "monospace"];
    const textNodes = [];
    const walk = document.createTreeWalker(document.querySelector(".frame"), NodeFilter.SHOW_TEXT);
    let n; while(n = walk.nextNode()) if(n.nodeValue.trim()) textNodes.push(n);
    
    textNodes.forEach(node => {
      const span = document.createElement("span");
      span.innerHTML = node.nodeValue.split("").map(char => 
        `<span class="random-letter" style="font-family:${fonts[Math.floor(Math.random()*3)]}">${char}</span>`
      ).join("");
      node.parentNode.replaceChild(span, node);
    });
  </script>
</body>
</html>
